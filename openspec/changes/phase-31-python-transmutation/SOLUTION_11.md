# Solution for Task: **Task 2**: Implement Visual Linker

Title: Implementing a Python-to-PIXEL Translator for Geometry OS

Proposal: Phase 31 - Python Transmutation

Context: Change ID: phase-31-python-transmutation

Task: **Task 2**: Implement Visual Linker

Problem Statement: Currently, creating executable tile scripts for the Infinite Map requires manually compiling C/Assembly to binaries and running offline conversion scripts. This is a friction for rapid protoyping and integration of AI-generated code.

Solution: Implement a Python-to-PIXEL pipeline that allows users (and AI agents) to drop raw Python scripts onto the map, which are instantly transpiled into visual RISC-V containers and deployed as executable tile scripts.

Benefits:
- Rapid Prototyping: Write code and see it run instantaneously.
- AI Compatibility: LLMs generate Python easily; this bridge allows LLMs to "code the world."
- Visual Debugging: Map pixels allow visual inspection of compiled logic.

Design:
1. Transpiation Service (Python)
A backend service that accepts Python source code and parses it using `ast`. It generates RISC-V pseudo-instruction maps from the parsed AST. The output is a flat binary `.bin` file.

2. Visual Linker (Python)
A Python script that takes the `.bin` file generated by the Transpiation Service and calculates the optimal `.rtspng` texture size (power of 2). It maps bytes to pixels using `hi_lbert_curve`. It embeds metadata (entry point, stack size) in the PNG header.

3. Frontend Integration (JS)
A JavaScript class that uploads the `.bin` file to the backend. The script listens for a `.rtspng` URL and calls `InfinitEMap.writeTile()` to place the executable on a tile.

Technical Constraints:
- Python only
- Subset only
- Implicit integers and floats (no dynamic memory allocation)
- Stack size fixed per tile

Planning Steps:
1. File paths that need to be created or modified.
2. A brief snippet of the Python code required.
3. Next steps command for the user (e.g. Create a file, run a script).

Markdown Format:
- Title in bold
- Constraints above in italics
- Planning steps in bullet points below the constraints
- Snippet of Python code in code blocks, separated by tabs
- Next step command as a command prompt or inline code in the next line