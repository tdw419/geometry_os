# Solution for Task: Profile critical paths

## Context

The Geometry OS Implementation Agent is responsible for implementing critical paths in Geometry OS using OpenSpec. The task is to provide a concise implementation plan or code solution for adding support for the PIxie profiler daemon.

## Goals

1. Implement critical path analysis using the PIxie profiler daemon.
2. Provide a clear and concise implementation plan for this task.
3. Ensure that the resulting code is well-documented, modularized, and easily readable by other developers or users of Geometry OS.
4. Ensure that any necessary dependencies (e.g. Python packages) are installed and configured appropriately.

## File paths and snippets required

1. The following file paths require modification:
   - /usr/local/bin/geom_os_profile
   - /usr/local/etc/geom_os_profile/config.json
2. A brief snippet of the Python or Rust code required:
   ```python
   from pixie import PIxieDaemon

   def profile(args):
       daemon = PIxieDaemon()
       daemon.start(args)
       return daemon.stop()
   ```

   This snippet creates a PIxie Daemon object, starts it with the `start` method, and returns the result of that call to the `stop` method.

## Next steps

1. Create a file called `pixie_daemon.json` in the `/usr/local/etc/` directory.
   - Add the following content:
     ```json
     {
         "profile": "/usr/local/bin/geom_os_profile",
         "args": [],
         "output": "pipeline"
     }
     ```
   - Save the file with a .json extension.
2. Run `sudo python3 geom_os_profile --config /usr/local/etc/pixie_daemon.json` in a terminal to start and monitor the PIxie Daemon.
3. Open the Geometry OS Settings application (e.g. `Settings` > `Preferences`).
4. Click the "Profiler" tab.
5. Select the "Add New Profiles" option, and select the new `pixie_daemon.json` file created in Step 1.
6. Configure any additional options as needed (e.g. CPU, memory).
7. Click "Save".
8. Restart Geometry OS for the changes to take effect.
9. To view the profile data generated by the PIxie Daemon, run `sudo python3 geom_os_profile --config /usr/local/etc/pixie_daemon.json`.
10. The results will be displayed in a terminal window.

## Conclusion

With this implementation plan and code solution, the Geometry OS Implementation Agent can provide critical path analysis using the PIxie profiler daemon.