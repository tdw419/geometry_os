# Milestone v1.2: Network Boot

**Status:** ✅ SHIPPED 2026-02-28
**Phases:** 7-11
**Total Plans:** 14

## Overview

Booting an OS should be as visual and intuitive as opening an image file — from anywhere.

Users can boot containers from anywhere - local or remote - with the same drag-and-drop experience. Remote containers are cached locally for offline access.

## Phases

### Phase 7: Cache Infrastructure

**Goal:** Downloaded containers are cached locally with automatic verification and eviction.

**Depends on:** Phase 6 (v1.1 Visual Shell)

**Requirements:** CACHE-01, CACHE-02, CACHE-04

**Success Criteria:**
1. User can boot a previously downloaded container without network access
2. User sees hash verification pass/fail status for each cached container
3. Cache automatically evicts least-recently-used entries when size limit reached
4. Stale cache entries are revalidated with ETag check on next access

Plans:
- [x] 07-01: Implement CatalogCacheManager with IndexedDB storage
- [x] 07-02: Add SHA256 hash verification on cache write/read
- [x] 07-03: Implement LRU eviction and ETag-based stale validation
- [x] 07-04: Add ES6 exports and cache-first fetch integration
- [x] 07-05: Add cache verification status indicator to desktop objects

---

### Phase 8: Remote Client

**Goal:** Users can browse and discover containers from remote catalog servers.

**Depends on:** Phase 7 (Cache Infrastructure)

**Requirements:** RCAT-01, RCAT-04

**Success Criteria:**
1. User can view list of available containers from configured remote servers
2. User can see which server each remote container comes from
3. Remote catalog loads without blocking the UI (stale-while-revalidate)
4. User can add/remove remote catalog server URLs in settings

Plans:
- [x] 08-01: Implement RemoteCatalogClient with multi-server aggregation
- [x] 08-02: Add server source indicators and settings UI

---

### Phase 9: Remote Boot

**Goal:** Users can boot containers from remote URLs with visual download progress.

**Depends on:** Phase 8 (Remote Client)

**Requirements:** RBOOT-01, RBOOT-02, RBOOT-04, RBOOT-05

**Success Criteria:**
1. User can click a remote container to download and boot it
2. User sees real-time download progress (percentage, speed, time remaining)
3. User sees hash verification status after download completes
4. User can boot a cached remote container while offline
5. Download progress shows in the desktop object overlay

Plans:
- [x] 09-01: Add remote fetch with streaming download progress
- [x] 09-02: Extend RTSDesktopObject with downloading state and progress overlay
- [x] 09-03: Integrate cache-first boot path for offline access

---

### Phase 10: Remote Catalog Integration

**Goal:** Users see a unified view of local and remote containers with search across all sources.

**Depends on:** Phase 9 (Remote Boot)

**Requirements:** RCAT-02, RCAT-03

**Success Criteria:**
1. User sees local and remote containers in a single unified catalog view
2. User can filter to show only local, only remote, or all containers
3. User can search across all catalog sources with a single search query
4. Remote containers are visually distinguished from local ones

Plans:
- [x] 10-01: Implement hybrid catalog view with source filtering
- [x] 10-02: Add unified search across local and remote catalogs

---

### Phase 11: Error Handling & Polish

**Goal:** Network errors are handled gracefully with actionable recovery options.

**Depends on:** Phase 10 (Remote Catalog Integration)

**Requirements:** RBOOT-03, CACHE-03

**Success Criteria:**
1. User can retry a failed download with a single click
2. Failed downloads retry automatically with exponential backoff (up to 3 attempts)
3. User can manually clear the cache from settings
4. User sees clear error messages for common failures (timeout, DNS, 404, auth)

Plans:
- [x] 11-01: Add retry logic with exponential backoff for failed downloads
- [x] 11-02: Implement cache clearing UI and error state overlays

---

## Milestone Summary

**Key Decisions:**
- Native IndexedDB API for container caching (no external library)
- Native Web Crypto API for SHA256 hash computation
- 7-day maxAge with 1-day staleWhileRevalidate window
- REST polling with stale-while-revalidate pattern
- Streaming download via fetch ReadableStream
- MAX_RETRIES=3 with exponential backoff (1s, 2s, 4s max)
- Color-coded cache bar: green < 70%, yellow < 90%, red >= 90%

**Issues Resolved:**
- Offline boot capability for remote containers
- Network error recovery with automatic retry
- Cache management with size visualization

**Technical Debt:** None incurred

---

## Components Delivered

| Component | Lines | Purpose |
|-----------|-------|---------|
| CatalogCacheManager.js | 1340 | IndexedDB cache with LRU eviction |
| ServerRegistry.js | 327 | Server configuration persistence |
| RemoteCatalogClient.js | 478 | Multi-server catalog aggregation |
| RemoteBootFetcher.js | 744 | Streaming downloads with retry |
| CatalogFilterBar.js | 166 | Filter bar UI (All/Local/Remote) |
| CatalogSearchBar.js | 167 | Search input with debounce |
| ServerSettingsPanel.js | 957 | Settings UI with cache management |

**Total new code:** ~8,264 lines (JavaScript components)

---

_For current project status, see .planning/ROADMAP.md_
