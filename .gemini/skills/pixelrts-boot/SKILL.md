---
name: pixelrts-boot
description: Extract, verify, and boot PixelRTS containers via QEMU with hash verification and auto-generated boot scripts
category: operations
---

# PixelRTS Boot

Extract and boot PixelRTS containers as Linux VMs via QEMU with automatic hash verification.

## When to Use

- Booting Linux kernels encoded as PixelRTS
- Running RISC-V or x86 VMs from spatial containers
- Verifying bootability of converted binaries
- Testing kernel/initramfs combinations

## Procedure

### Step 1: Extract Container

```bash
# Extract to directory
python3 pixelrts_v2_extractor.py kernel.rts.png --output ./extracted/

# Creates:
# ./extracted/vmlinux     (kernel binary)
# ./extracted/initrd      (if embedded)
# ./extracted/metadata.json
```

### Step 2: Verify Hash

```bash
# Automatic SHA256 verification during extraction
python3 pixelrts_v2_extractor.py kernel.rts.png --verify

# Manual verification
sha256sum -c extracted/metadata.json
```

### Step 3: Generate Boot Script

```bash
# Auto-generate QEMU boot script
python3 pixelrts_v2_extractor.py kernel.rts.png --boot-script

# Creates: kernel.rts.boot.sh
chmod +x kernel.rts.boot.sh
```

### Step 4: Boot VM

```bash
# Run generated boot script
./kernel.rts.boot.sh

# Or manual QEMU invocation
qemu-system-riscv64 \
  -machine virt \
  -nographic \
  -bios none \
  -kernel extracted/vmlinux \
  -append "console=ttyS0"
```

## CLI Reference

### pixelrts_v2_extractor.py

```
usage: pixelrts_v2_extractor.py [-h] [--output DIR] [--verify] [--boot-script]
                                 input

positional arguments:
  input          Input .rts.png file

options:
  --output DIR   Output directory (default: ./extracted/)
  --verify       Verify SHA256 hash during extraction
  --boot-script  Generate executable boot script
```

## QEMU Configurations

### RISC-V 64-bit

```bash
qemu-system-riscv64 \
  -machine virt \
  -cpu rv64 \
  -m 256M \
  -nographic \
  -bios none \
  -kernel vmlinux \
  -append "console=ttyS0 root=/dev/ram0"
```

### x86_64

```bash
qemu-system-x86_64 \
  -m 512M \
  -nographic \
  -kernel vmlinuz \
  -initrd initrd.img \
  -append "console=ttyS0"
```

### With VirtIO Devices

```bash
qemu-system-riscv64 \
  -machine virt \
  -m 256M \
  -nographic \
  -kernel vmlinux \
  -device virtio-blk-device,drive=hd0 \
  -drive file=disk.img,format=raw,id=hd0
```

## Troubleshooting

### "Hash verification failed"

**Cause**: Container corrupted or modified.
**Fix**: Re-download or re-convert from source.

```bash
# Check file integrity
file kernel.rts.png
sha256sum kernel.rts.png

# Re-extract with force
python3 pixelrts_v2_extractor.py kernel.rts.png --output ./fresh/ --verify
```

### "Kernel panic - not syncing"

**Cause**: Missing initramfs or wrong boot parameters.
**Fix**: Provide initramfs and correct console.

```bash
# Add initramfs
qemu-system-riscv64 -kernel vmlinux -initrd initrd.img -append "console=ttyS0"

# Check kernel config for required drivers
zcat /proc/config.gz | grep VIRTIO
```

### "No output on console"

**Cause**: Wrong console device or missing serial support.
**Fix**: Verify console parameter and QEMU serial config.

```bash
# Try different console devices
-append "console=ttyS0"    # Serial
-append "console=hvc0"     # VirtIO console
-append "earlycon"         # Early console

# Enable QEMU serial
-serial mon:stdio
```

### "QEMU: Unable to find CPU definition"

**Cause**: Unsupported CPU type for QEMU version.
**Fix**: Use generic CPU or update QEMU.

```bash
# List available CPUs
qemu-system-riscv64 -cpu help

# Use generic
-cpu rv64  # or omit for default
```

## Examples

### Boot Alpine Linux

```bash
# Extract Alpine container
python3 pixelrts_v2_extractor.py alpine.rts.png --boot-script

# Boot with generated script
./alpine.rts.boot.sh

# Expected output:
# Starting QEMU...
# [    0.000000] Linux version 6.x.x
# [    0.000000] console [ttyS0] enabled
# ...
# Alpine login:
```

### Boot with Custom Initramfs

```bash
# Extract kernel only
python3 pixelrts_v2_extractor.py kernel.rts.png --output ./boot/

# Boot with custom initramfs
qemu-system-riscv64 \
  -machine virt \
  -m 256M \
  -nographic \
  -kernel boot/vmlinux \
  -initrd custom-initrd.cpio.gz \
  -append "console=ttyS0 init=/init"
```

### Network Boot

```bash
# Boot with network support
qemu-system-riscv64 \
  -machine virt \
  -m 256M \
  -nographic \
  -kernel vmlinux \
  -netdev user,id=net0,hostfwd=tcp::2222-:22 \
  -device virtio-net-device,netdev=net0 \
  -append "console=ttyS0"

# SSH to VM
ssh -p 2222 root@localhost
```

## Generated Boot Script Format

```bash
#!/bin/bash
# Auto-generated by pixelrts_v2_extractor.py
# Source: kernel.rts.png
# SHA256: abc123...

qemu-system-riscv64 \
  -machine virt \
  -m 256M \
  -nographic \
  -bios none \
  -kernel "$(dirname "$0")/vmlinux" \
  -append "console=ttyS0"
```

## Related Skills

- `pixelrts-convert` - Convert binaries for booting
- `pixelrts-analyze` - Verify container integrity
- `pixelrts-debug` - Debug boot failures
