# Spatial Tectonics Step 2 Team
# Wire ConsensusEngine → TectonicSimulator → VAT for Phase 28

team:
  name: spatial-tectonics-team
  description: |
    Completes the Neural-Python-Rust bridge for Phase 28 Spatial Tectonics.
    Step 2: ConsensusEngine → TectonicSimulator → VAT Update.

  project_root: /home/jericho/zion/projects/geometry_os/geometry_os

  agents:
    - name: python-client-dev
      role: Implements Python-side communication components
      focus:
        - TectonicWSClient for proposal submission
        - TectonicHandler for Rust IPC
        - VATManager for position tracking
      files:
        - systems/evolution_daemon/tectonic_ws_client.py
        - systems/visual_shell/api/tectonic_handler.py
        - systems/visual_shell/api/vat_manager.py

    - name: bridge-integrator
      role: Wires components into Visual Bridge
      focus:
        - Import TectonicHandler and VATManager
        - Update tectonic_proposal handler
        - Initialize components in __init__
      files:
        - systems/visual_shell/api/visual_bridge.py

    - name: hud-developer
      role: Adds tectonic visualization to HUD
      focus:
        - Add _renderTectonicSection() method
        - WebSocket handlers for tectonic events
        - Display top bond, status, cycle count
      files:
        - systems/visual_shell/web/visual_debug_overlay.js

    - name: test-engineer
      role: Writes unit and integration tests
      focus:
        - Test TectonicWSClient message format
        - Test TectonicHandler state I/O
        - Test VATManager position operations
        - End-to-end proposal → VAT flow
      files:
        - tests/test_tectonic_ws_client.py
        - tests/test_tectonic_handler.py
        - tests/test_vat_manager.py
        - tests/test_tectonics_e2e.py

  tasks:
    - id: task-1
      title: TectonicWSClient
      assignee: python-client-dev
      dependencies: []
      description: |
        Create systems/evolution_daemon/tectonic_ws_client.py
        Implement format_proposal_message(), connect(), submit_proposal(), close()
        Test message format structure

    - id: task-2
      title: TectonicHandler
      assignee: python-client-dev
      dependencies: []
      description: |
        Create systems/visual_shell/api/tectonic_handler.py
        Implement process_proposal(), _write_proposal_state(), read_layout_delta()
        Create .geometry/tectonic/ directory for IPC

    - id: task-3
      title: VATManager
      assignee: python-client-dev
      dependencies: []
      description: |
        Create systems/visual_shell/api/vat_manager.py
        Implement _load_vat(), _save_vat(), set_tile_position(), get_tile_position(), apply_delta()
        Test persistence and delta application

    - id: task-4
      title: Visual Bridge Integration
      assignee: bridge-integrator
      dependencies: [task-1, task-2, task-3]
      description: |
        Import TectonicHandler and VATManager in visual_bridge.py
        Initialize in __init__
        Update tectonic_proposal handler to use components

    - id: task-5
      title: HUD Tectonic Section
      assignee: hud-developer
      dependencies: [task-4]
      description: |
        Add _renderTectonicSection() to visual_debug_overlay.js
        Add WebSocket handlers for tectonic events
        Display status, cycle count, top bond

    - id: task-6
      title: End-to-End Testing
      assignee: test-engineer
      dependencies: [task-4, task-5]
      description: |
        Create tests/test_tectonics_e2e.py
        Test full pulse → proposal → VAT flow
        Test pulse aggregation accuracy
        Test bond strength calculation
        Verify HUD displays correctly

  success_criteria:
    - All tectonic proposals processed
    - VAT file updates on layout changes
    - HUD displays tectonic section
    - 10+ tests passing
    - End-to-end latency <100ms

  reference_docs:
    - docs/plans/2026-02-19-tectonic-realignment-design.md
    - docs/plans/2026-02-19-spatial-tectonics-step2.md
    - systems/infinite_map_rs/src/tectonic/mod.rs
    - systems/evolution_daemon/spatial_tectonics.py
