# WebMCP Bridge Agent Team Configuration
#
# This team is responsible for extending and improving the WebMCP Bridge
# that exposes Geometry OS capabilities to AI agents via structured tools.

name: webmcp-bridge
description: |
  Agent team for WebMCP Bridge development and improvement.

  Goal: Build a production-ready AI-OS interface that enables seamless
  agent-to-OS communication with full debugging, coordination, and
  verification capabilities.

  Key Innovation: "The Screen is the Hard Drive â€” and now the API surface."
  AI agents interact directly with the OS without screenshotting or DOM scraping.

  Current State:
  - Phase A + B COMPLETE: 8 tools registered
  - Phase C: DevTools MCP Integration (COMPLETE)
  - Phase D: A2A Protocol (COMPLETE)
  - Phase E: Reliability (PLANNED)
  - Phase F: AI-Driven Visual Builder (NEXT)

# Selection: Choose agent with best capability match
selection_policy: best_fit

# Fixed team size
scaling_policy: fixed

# Failover to another agent on failure
failure_policy: failover

# Retry configuration
max_retries: 3
retry_delay: 5.0

# Team communication
enable_event_bus: true
enable_health_monitoring: true

# Health monitoring
health_check_interval: 30.0
heartbeat_timeout: 120.0
health_history_limit: 100

# Event bus
event_history_limit: 1000
enable_dead_letter_queue: true

# Team constraints
max_concurrent_tasks: 8
max_queue_size: 50
task_timeout: 300.0

# Team metadata
metadata:
  project: geometry-os
  component: webmcp-bridge
  roadmap: ai_project_management/roadmaps/webmcp-improvement-roadmap.md
  architecture: docs/plans/2026-02-12-webmcp-bridge-design.md
  implementation_plan: docs/plans/2026-02-13-webmcp-phase-f-implementation.md
  design_doc: docs/plans/2026-02-13-webmcp-phase-f-design.md
  current_phase: F
  current_version: "1.5.0"
  completed_phases:
    - A
    - B
    - C
    - D

# Agent definitions
agents:
  # ============================================
  # ORCHESTRATOR - Team coordination
  # ============================================
  - agent_id: orchestrator
    name: WebMCP Orchestrator
    agent_type: orchestrator
    capabilities:
      - orchestration
      - monitoring
      - task_execution
      - roadmap_processing
    enabled: true
    max_concurrent_tasks: 1
    priority: 100
    metadata:
      role: Team coordination and roadmap execution
      focuses:
        - Roadmap phase execution
        - Agent coordination
        - Progress tracking
        - Dependency management
      key_files:
        - ai_project_management/roadmaps/webmcp-improvement-roadmap.md

  # ============================================
  # MCP SPECIALIST - MCP protocol expertise
  # ============================================
  - agent_id: mcp-specialist
    name: MCP Protocol Specialist
    agent_type: specialist
    capabilities:
      - mcp_development
      - code_generation
      - protocol_implementation
      - testing
    enabled: true
    max_concurrent_tasks: 2
    priority: 90
    metadata:
      role: MCP server and tool development
      focuses:
        - MCP tool registration
        - MCP server configuration
        - chrome-devtools-mcp integration
        - A2A protocol implementation
      key_files:
        - systems/visual_shell/web/.mcp/config.json
        - systems/visual_shell/web/webmcp_bridge.js

  # ============================================
  # FRONTEND DEVELOPER - JavaScript/HTML/CSS
  # ============================================
  - agent_id: frontend-dev
    name: Frontend Developer
    agent_type: specialist
    capabilities:
      - code_generation
      - javascript
      - html_css
      - testing
    enabled: true
    max_concurrent_tasks: 2
    priority: 85
    metadata:
      role: JavaScript bridge implementation
      focuses:
        - WebMCP bridge JavaScript
        - WebSocket management
        - HTTP client implementation
        - Event handling
        - Test page development
      key_files:
        - systems/visual_shell/web/webmcp_bridge.js
        - systems/visual_shell/web/test_webmcp_bridge.html
        - systems/visual_shell/web/test_devtools_mcp.html
        - systems/visual_shell/web/hilbert_lut.js

  # ============================================
  # INTEGRATION ENGINEER - Backend integration
  # ============================================
  - agent_id: integration-engineer
    name: Integration Engineer
    agent_type: specialist
    capabilities:
      - code_generation
      - backend_integration
      - websocket
      - http_api
      - testing
    enabled: true
    max_concurrent_tasks: 2
    priority: 85
    metadata:
      role: Backend service integration
      focuses:
        - WebSocket connection management
        - LM Studio HTTP integration
        - Evolution backend integration
        - Agent backend integration
        - Error handling and recovery
      key_files:
        - systems/visual_shell/web/webmcp_bridge.js
        - systems/visual_shell/web/lmstudio_websocket.js
        - systems/visual_shell/web/debug_chrome.sh

  # ============================================
  # CHROME DEVTOOLS SPECIALIST - CDP expertise
  # ============================================
  - agent_id: devtools-specialist
    name: Chrome DevTools Specialist
    agent_type: specialist
    capabilities:
      - chrome_devtools
      - debugging
      - code_generation
      - testing
    enabled: true
    max_concurrent_tasks: 2
    priority: 80
    metadata:
      role: Chrome DevTools Protocol integration
      focuses:
        - CDP (Chrome DevTools Protocol)
        - Remote debugging setup
        - Screenshot capture
        - Console log access
        - Performance metrics
      key_files:
        - systems/visual_shell/web/.mcp/config.json
        - systems/visual_shell/web/debug_chrome.sh
        - systems/visual_shell/web/test_devtools_mcp.html

  # ============================================
  # TEST ENGINEER - Quality assurance
  # ============================================
  - agent_id: test-engineer
    name: Test Engineer
    agent_type: specialist
    capabilities:
      - testing
      - code_analysis
      - verification
      - documentation
    enabled: true
    max_concurrent_tasks: 3
    priority: 75
    metadata:
      role: Test coverage and verification
      focuses:
        - TDD approach
        - HTML test page development
        - Integration test scenarios
        - Verification procedures
        - Coverage targets (>80%)
      key_files:
        - systems/visual_shell/web/test_webmcp_bridge.html
        - systems/visual_shell/web/test_devtools_mcp.html

  # ============================================
  # SECURITY SPECIALIST - Input validation
  # ============================================
  - agent_id: security-specialist
    name: Security Specialist
    agent_type: specialist
    capabilities:
      - security
      - code_analysis
      - validation
      - testing
    enabled: true
    max_concurrent_tasks: 2
    priority: 80
    metadata:
      role: Security hardening and validation
      focuses:
        - Input validation
        - JSON Schema validation
        - Rate limiting
        - Error sanitization
        - Circuit breaker implementation
      key_files:
        - systems/visual_shell/web/webmcp_bridge.js

  # ============================================
  # DOCUMENTATION WRITER - Docs and guides
  # ============================================
  - agent_id: docs-writer
    name: Documentation Writer
    agent_type: specialist
    capabilities:
      - documentation
      - code_analysis
      - markdown
      - examples
    enabled: true
    max_concurrent_tasks: 2
    priority: 60
    metadata:
      role: Documentation and usage guides
      focuses:
        - Design documents
        - Implementation plans
        - Usage examples
        - API reference
        - Quick start guides
      key_files:
        - docs/plans/2026-02-12-webmcp-bridge-design.md
        - docs/plans/2026-02-12-webmcp-phase-b-design.md
        - docs/plans/2026-02-13-webmcp-phase-c-design.md
        - docs/plans/2026-02-13-webmcp-phase-c-devtools-mcp.md
        - docs/plans/2026-02-13-webmcp-phase-f-design.md

  # ============================================
  # VISUAL BUILDER SPECIALIST - Phase F (AI-Driven Visual Builder)
  # ============================================
  - agent_id: visual-builder-specialist
    name: Visual Builder Specialist
    agent_type: specialist
    capabilities:
      - code_generation
      - javascript
      - pixijs
      - ui_components
      - testing
    enabled: true
    max_concurrent_tasks: 2
    priority: 90
    metadata:
      role: AI-Driven Visual Builder implementation
      focuses:
        - BuilderPanel UI component
        - Tile placement on Infinite Map
        - Shader editor integration
        - Cartridge assembly workflow
        - Multi-channel feedback loops
        - Action logging
      key_files:
        - systems/visual_shell/web/BuilderPanel.js
        - systems/visual_shell/web/BuilderPanel.css
        - systems/visual_shell/web/builder_tools_test.html
        - docs/plans/2026-02-13-webmcp-phase-f-design.md

  # ============================================
  # RTS CARTRIDGE SPECIALIST - Phase F (Cartridge Assembly)
  # ============================================
  - agent_id: rts-cartridge-specialist
    name: RTS Cartridge Specialist
    agent_type: specialist
    capabilities:
      - code_generation
      - python
      - binary_formats
      - pixelrts
      - testing
    enabled: true
    max_concurrent_tasks: 1
    priority: 85
    metadata:
      role: PixelRTS cartridge creation and assembly
      focuses:
        - Cartridge assembly from map regions
        - RTS file format handling
        - Boot configuration
        - Preview generation
      key_files:
        - systems/pixel_compiler/pixelrts_v2_core.py
        - systems/pixel_compiler/rts_registry_manager.py
        - systems/visual_shell/web/webmcp_bridge.js

# Task routing rules
task_routing:
  # Phase C tasks
  - pattern: "install.*mcp|npm.*install"
    assign_to: mcp-specialist
  - pattern: "chrome.*debug|devtools|cdp"
    assign_to: devtools-specialist
  - pattern: "test.*page|verification"
    assign_to: test-engineer
  - pattern: "document|readme|design.*doc"
    assign_to: docs-writer
  # Phase D tasks
  - pattern: "a2a|agent.*protocol|agent2agent"
    assign_to: mcp-specialist
  - pattern: "websocket|http.*client"
    assign_to: integration-engineer
  # Phase F tasks (AI-Driven Visual Builder)
  - pattern: "builder.*panel|builderpanel|tile.*palette"
    assign_to: visual-builder-specialist
  - pattern: "builder.*tool|place.*tile|load.*shader"
    assign_to: visual-builder-specialist
  - pattern: "shader.*editor|evolve.*shader"
    assign_to: visual-builder-specialist
  - pattern: "cartridge.*assembly|assemble.*cartridge|rts.*png"
    assign_to: rts-cartridge-specialist
  - pattern: "action.*log|builder.*preview"
    assign_to: visual-builder-specialist
  # General
  - pattern: "security|validation|rate.*limit"
    assign_to: security-specialist
  - pattern: "javascript|bridge.*js|html"
    assign_to: frontend-dev

# Phase completion criteria
phase_completion:
  C:
    - "chrome-devtools-mcp package installed"
    - "MCP config file created"
    - "debug_chrome.sh script working"
    - "test_devtools_mcp.html passes all tests"
    - "Design documentation complete"
  D:
    - "A2A protocol researched and documented"
    - "A2A message router implemented"
    - "Area Agent A2A integration working"
    - "A2A tests passing (12 tests)"
  E:
    - "Circuit breaker implemented"
    - "Retry with backoff working"
    - "Health monitoring active"
  F:
    - "6 new builder tools registered (17 total)"
    - "BuilderPanel UI renders with Tile/Shader/Cartridge tabs"
    - "builder_place_tile creates visible tiles on Infinite Map"
    - "builder_load_shader + builder_evolve_shader work with visual preview"
    - "builder_assemble_cartridge creates downloadable .rts.png"
    - "Action Log shows real-time AI activity"
    - "Preview screenshots work via DevTools MCP integration"
    - "A2A agents can monitor builder region changes"
  H:
    - "Tool metrics available"
    - "Request batching implemented"
    - "Response caching working"
  I:
    - "Input validation for all tools"
    - "Rate limiting active"
